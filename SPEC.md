# T-Tone AI: ì¹˜ì•„ ìƒ‰ìƒ ì§„ë‹¨ ì„œë¹„ìŠ¤ ì¬ì„¤ê³„ ìŠ¤í™ (V2 Revised)

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ì„œë¹„ìŠ¤ ì„¤ëª…
T-Tone AI_V2ëŠ” ìŠ¤ë§ˆíŠ¸í° ì¹´ë©”ë¼ë¡œ ì´¬ì˜í•œ ì¹˜ì•„ ì‚¬ì§„ì„ ë¶„ì„í•˜ì—¬ **WID(Whiteness Index for Dentistry)**ë¥¼ ê³„ì‚°í•˜ê³ , ì—°ë ¹ ëŒ€ë¹„ ì¹˜ì•„ ë‚˜ì´ë¥¼ ì§„ë‹¨í•˜ëŠ” ì›¹ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê¸°ëŠ¥
- ğŸ“¸ **ì´ë¯¸ì§€ ì´¬ì˜/ì—…ë¡œë“œ**: ìŠ¤ë§ˆíŠ¸í° ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ ì´¬ì˜ ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ
- ğŸ¦· **ì¹˜ì•„ ì˜ì—­ ìë™ ê²€ì¶œ**: AI ëª¨ë¸(FPN)ì´ ì¹˜ì•„(íŠ¹íˆ ìƒì•… ì „ì¹˜ #11, #21) ì˜ì—­ ê²€ì¶œ
- ğŸ¨ **ìƒ‰ìƒ ë¶„ì„**: ì¹˜ì•„ ì˜ì—­ì˜ í‰ê·  RGB â†’ CIELab ë³€í™˜ â†’ WID ê³„ì‚°
- ğŸ“Š **í†µê³„ ë¶„ì„**: ì„±ë³„/ì—°ë ¹ëŒ€ë³„ ì—°êµ¬ ë°ì´í„° ê¸°ë°˜ ë°±ë¶„ìœ„ ê³„ì‚°
- ğŸ‘´ **ì¹˜ì•„ ë‚˜ì´ ì¶”ì •**: WIDì™€ ë°±ë¶„ìœ„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¹˜ì•„ ë‚˜ì´ ì—­ì‚°

### 1.3 ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Next.js 16 (App Router), React 19, TypeScript, Tailwind CSS v4, Shadcn UI
- **AI Server**: Lightning.ai (FastAPI + PyTorch) â€” **ëª¨ë“  ì—°ì‚° ë‹´ë‹¹**
- **Client-side**: MediaPipe Face Mesh (ì… ëœë“œë§ˆí¬ ê²€ì¶œ), browser-image-compression
- **ë°°í¬**: Vercel (í”„ë¡ íŠ¸ì—”ë“œ ì •ì  í˜¸ìŠ¤íŒ…ë§Œ), Lightning.ai (AI ì„œë²„)
- **ë°ì´í„°**: ì—°êµ¬ ë…¼ë¬¸ ê¸°ë°˜ CSV ë°ì´í„° (`data.csv`)

### 1.4 ì•„í‚¤í…ì²˜ ì›ì¹™
> **Lightning.aiê°€ ëª¨ë“  ì—°ì‚°ì„ ë‹´ë‹¹í•˜ê³ , Vercelì€ í”„ë¡ íŠ¸ì—”ë“œë§Œ ì„œë¹™í•œë‹¤.**
> **í´ë¼ì´ì–¸íŠ¸ëŠ” Lightning.aiì™€ ì§ì ‘ í†µì‹ í•œë‹¤ (Vercel API Routes ì—†ìŒ).**

ì´ ì›ì¹™ìœ¼ë¡œ Vercel Hobby Planì˜ 10ì´ˆ íƒ€ì„ì•„ì›ƒ ì œí•œì„ ì™„ì „íˆ ìš°íšŒí•©ë‹ˆë‹¤.

---

## 2. ì‚¬ìš©ì í”Œë¡œìš° (5ë‹¨ê³„)

### Step 1: Hero Section
- **ì»´í¬ë„ŒíŠ¸**: `components/hero-section.tsx`
- **ë‚´ìš©**: ì„œë¹„ìŠ¤ ì†Œê°œ, ë¸Œëœë“œ ì•„ì´ë´í‹°í‹°
- **Pre-warm**: í˜ì´ì§€ ë¡œë“œ ì‹œ Lightning.ai `/health` í˜¸ì¶œ (Cold Start ëŒ€ë¹„)
- **ì•¡ì…˜**: "ì§„ë‹¨ ì‹œì‘" ë²„íŠ¼ í´ë¦­

### Step 2: User Info Form
- **ì»´í¬ë„ŒíŠ¸**: `components/info-form.tsx`
- **ì…ë ¥ ì •ë³´**:
  - ì„±ë³„: ë‚¨ì„± / ì—¬ì„± (ë¼ë””ì˜¤ ë²„íŠ¼)
  - ë‚˜ì´: ìˆ«ì ì…ë ¥ (1-100ì„¸)
- **ê²€ì¦**:
  - ë‚˜ì´ëŠ” 1 ì´ìƒ 100 ì´í•˜
  - ëª¨ë“  í•„ë“œ í•„ìˆ˜ ì…ë ¥
- **ì•¡ì…˜**: "ë‹¤ìŒ" ë²„íŠ¼ í´ë¦­

### Step 3: Camera Upload
- **ì»´í¬ë„ŒíŠ¸**: `components/camera-upload.tsx`
- **ê¸°ëŠ¥**:
  - íŒŒì¼ ì—…ë¡œë“œ (JPEG, PNG, WebP ì§€ì›)
  - iOS Safari í˜¸í™˜ (ë¹ˆ MIME íƒ€ì… ì²˜ë¦¬)
  - ì´ë¯¸ì§€ ì••ì¶•: `browser-image-compression` (ìµœëŒ€ 1MB, 1920px)
  - **MediaPipe Face Mesh** í†µí•©:
    - ë¸Œë¼ìš°ì €ì—ì„œ ì–¼êµ´ ê²€ì¶œ (ë™ì  import)
    - ì…ìˆ  ëœë“œë§ˆí¬ 20ê°œ í¬ì¸íŠ¸ ì¶”ì¶œ (`lipPoints`)
    - ì… ì˜ì—­ ì¢Œí‘œ ê³„ì‚° (`mouthInfo`)
- **ì´¬ì˜ ê°€ì´ë“œ**:
  - ì‚¬ì§„ ì˜ˆì‹œ ì´ë¯¸ì§€ í‘œì‹œ (`/images/photo-guide.webp`)
  - ê°€ì´ë“œ í…ìŠ¤íŠ¸: "ì…ì„ ë²Œë¦¬ê³ ", "ë°ì€ ê³³ì—ì„œ" ë“±
- **ì•¡ì…˜**: "ì¹˜ì•„ ë¶„ì„ ì‹œì‘" ë²„íŠ¼ í´ë¦­ â†’ MediaPipe ì‹¤í–‰ â†’ Lightning.ai ì „ì†¡

### Step 4: Analysis Loading
- **ì»´í¬ë„ŒíŠ¸**: `components/analysis-loading.tsx`
- **ë¹„ë™ê¸° í´ë§ í”Œë¡œìš°**:
  1. í´ë¼ì´ì–¸íŠ¸ â†’ Lightning.ai `POST /analyze` â†’ `{job_id}` ìˆ˜ì‹ 
  2. 2ì´ˆë§ˆë‹¤ `GET /status/{job_id}` í´ë§
  3. ì§„í–‰ ìƒíƒœë³„ UI ì—…ë°ì´íŠ¸ (ì „ì²˜ë¦¬ â†’ ì¶”ë¡  â†’ í›„ì²˜ë¦¬ â†’ í†µê³„)
  4. `completed` ì‹œ ê²°ê³¼ í‘œì‹œ, `failed` ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ + ì¬ì‹œë„
- **Cold Start ëŒ€ì‘**:
  - `warming`: "AI ì„œë²„ ì‹œì‘ ì¤‘... ì²« ì‚¬ìš© ì‹œ 20-30ì´ˆ ì†Œìš”"
  - ìë™ ì¬ì‹œë„: `/health` 3ì´ˆë§ˆë‹¤ ì²´í¬ â†’ warm í›„ ìë™ ì¬ì œì¶œ

### Step 5: Result Dashboard
- **ì»´í¬ë„ŒíŠ¸**: `components/result-dashboard.tsx`
- **í‘œì‹œ ì •ë³´**:
  1. **ì¹˜ì•„ ë‚˜ì´**: í° ìˆ«ìë¡œ ê°•ì¡° (`estimatedAge`)
  2. **ì‹¤ì œ ë‚˜ì´ì™€ ë¹„êµ**: "ë” ì ŠìŒ" / "ë‚˜ì´ ëŒ€ë¹„ ì ì ˆ" / "ë” ëŠ™ìŒ"
  3. **WID ìŠ¤ì½”ì–´**: ë°˜ì›í˜• ê²Œì´ì§€ (ë…¸ë€ìƒ‰ â†’ í°ìƒ‰ ê·¸ë¼ë°ì´ì…˜)
  4. **ë°±ë¶„ìœ„**: "ìƒìœ„ X%"
  5. **ì´ë¯¸ì§€ ë¶„ì„**: ì›ë³¸ ì´ë¯¸ì§€ & ì‹œê°í™” ì´ë¯¸ì§€ (ì¹˜ì•„ ì˜ì—­ ì´ˆë¡ìƒ‰ ì˜¤ë²„ë ˆì´)
  6. **í’ˆì§ˆ ê²½ê³ **: íë¦¼, ì–´ë‘ì›€ ë“± (ì„ íƒì )
- **ì•¡ì…˜**: "ë‹¤ì‹œ ì§„ë‹¨í•˜ê¸°" ë²„íŠ¼

---

## 3. ë°ì´í„° í”Œë¡œìš°

### 3.1 ì…ë ¥ ë°ì´í„°
```typescript
// UserInfo (Step 2ì—ì„œ ìˆ˜ì§‘)
{
  gender: "male" | "female",
  age: number  // 1-100
}

// MouthInfo (Step 3ì—ì„œ MediaPipeë¡œ ì¶”ì¶œ)
{
  centerX: number,
  centerY: number,
  width: number,
  height: number,
  upperY: number,
  lowerY: number,
  lipPoints: [number, number][]  // 20ê°œ ì…ìˆ  ëœë“œë§ˆí¬
}
```

### 3.2 ë¹„ë™ê¸° í´ë§ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Browser Client  â”‚  HTTPS  â”‚      Lightning.ai (FastAPI)      â”‚
â”‚  (Next.js SPA)   â”‚         â”‚      GPU Server + PyTorch        â”‚
â”‚                  â”‚         â”‚                                  â”‚
â”‚  â‘  POST /analyze â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  ì´ë¯¸ì§€ ìˆ˜ì‹  â†’ job_id ì¦‰ì‹œ ë°˜í™˜    â”‚
â”‚     (image+info) â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”‚  {job_id: "uuid"}  (<200ms)      â”‚
â”‚                  â”‚         â”‚                                  â”‚
â”‚                  â”‚         â”‚  [Background Processing]          â”‚
â”‚  â‘¡ GET /status   â”‚â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  EXIFë³´ì • â†’ CLAHE â†’ FPNì¶”ë¡        â”‚
â”‚     (2ì´ˆë§ˆë‹¤ í´ë§) â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â†’ ë§ˆìŠ¤í¬ì •ì œ â†’ RGBì¶”ì¶œ            â”‚
â”‚                  â”‚         â”‚  â†’ Labë³€í™˜ â†’ WIDê³„ì‚°              â”‚
â”‚  â‘¢ ê²°ê³¼ ìˆ˜ì‹      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â†’ í†µê³„ë¶„ì„ â†’ ì‹œê°í™” â†’ ê²°ê³¼ë°˜í™˜    â”‚
â”‚     & ëŒ€ì‹œë³´ë“œ    â”‚         â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬**: POST /analyzeëŠ” ì¦‰ì‹œ job_idë¥¼ ë°˜í™˜í•˜ê³ , ë¬´ê±°ìš´ ì²˜ë¦¬ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰. í´ë¼ì´ì–¸íŠ¸ëŠ” ê°€ë²¼ìš´ GET ìš”ì²­ìœ¼ë¡œ í´ë§ë§Œ í•˜ë¯€ë¡œ íƒ€ì„ì•„ì›ƒ ë¬¸ì œ ì—†ìŒ.

### 3.3 ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ (Lightning.ai)

```
ì´ë¯¸ì§€ íŒŒì¼ (File) + UserInfo + MouthInfo
  â†“
1. ì´ë¯¸ì§€ ê²€ì¦ (í¬ë§·, í¬ê¸°, í’ˆì§ˆ)
  â†“
2. EXIF Orientation ë³´ì •
  â†“
3. CLAHE ëŒ€ë¹„ í–¥ìƒ
  â†“
4. FPN ëª¨ë¸ ì¶”ë¡  (448Ã—448, TTA)
  â†“
5. ë§ˆìŠ¤í¬ í›„ì²˜ë¦¬ (Adaptive Threshold, Soft-Erosion, Class Priority)
  â†“
6. ì¹˜ì•„ RGB ì¶”ì¶œ (ì¤‘ì ˆì¹˜ #11,#21 ìš°ì„ )
  â†“
7. RGB â†’ CIELab ë³€í™˜ (D65, 2Â° observer)
  â†“
8. WID ê³„ì‚°: WID = 0.511Ã—L* - 2.324Ã—a* - 1.100Ã—b*
  â†“
9. ì—°êµ¬ ë°ì´í„° ì¡°íšŒ (ì„±ë³„/ì—°ë ¹ëŒ€ ë§¤ì¹­)
  â†“
10. ë°±ë¶„ìœ„ ê³„ì‚° (ì •ê·œë¶„í¬ CDF)
  â†“
11. ì¹˜ì•„ ë‚˜ì´ ì¶”ì •
  â†“
12. ì‹œê°í™” ìƒì„± (ì´ˆë¡ìƒ‰ ì˜¤ë²„ë ˆì´ â†’ Base64 PNG)
  â†“
13. ê²°ê³¼ ë°˜í™˜ (AnalysisResult)
```

### 3.4 ì¶œë ¥ ë°ì´í„°
```typescript
// AnalysisResult
{
  wid: number,                    // WID ê°’ (ì˜ˆ: 3.45)
  percentile: number,             // ë°±ë¶„ìœ„ (0-100)
  estimatedAge: number,           // ì˜ˆìƒ ì¹˜ì•„ ë‚˜ì´
  labValues: {
    l: number,                    // CIELab L* (0-100)
    a: number,                    // CIELab a* (-128 ~ 127)
    b: number                     // CIELab b* (-128 ~ 127)
  },
  visualization: {
    image: string                 // data:image/png;base64,... (ì¹˜ì•„ ì˜ì—­ ì´ˆë¡ìƒ‰ ì˜¤ë²„ë ˆì´)
  },
  aiMetadata: {
    detectedTeethCount: number,
    processingTimeMs: number,
    centralIncisorsMaskPixels: number,
    toothNumbers: number[],
    confidenceScore: number
  },
  qualityWarnings: string[]       // ["low_brightness", "blur_detected"] ë“±
}
```

---

## 4. ë³´ì¡´í•´ì•¼ í•  ì•Œê³ ë¦¬ì¦˜ (ë³€ê²½ ê¸ˆì§€)

### 4.1 ìƒ‰ê³µê°„ ë³€í™˜

```typescript
// sRGB â†’ Linear RGB
srgbToLinear(v: number): number {
  v /= 255;
  return v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
}

// Linear RGB â†’ XYZ (D65 white point)
x = rL * 0.4124564 + gL * 0.3575761 + bL * 0.1804375
y = rL * 0.2126729 + gL * 0.7151522 + bL * 0.072175
z = rL * 0.0193339 + gL * 0.119192 + bL * 0.9503041

// XYZ â†’ CIELab
f(t) = t > 0.008856 ? t^(1/3) : 7.787t + 16/116
L* = 116 * fy - 16
a* = 500 * (fx - fy)
b* = 200 * (fy - fz)
```

**D65 White Point**: `{ x: 95.047, y: 100.0, z: 108.883 }`

### 4.2 WID ê³„ì‚°

```typescript
WID = 0.511 Ã— L* + (-2.324) Ã— a* + (-1.100) Ã— b*
```

**ì¶œì²˜**: ì—°êµ¬ ë…¼ë¬¸ ê¸°ë°˜ ê³µì‹

### 4.3 ë°±ë¶„ìœ„ ê³„ì‚°

```typescript
// Z-score ê³„ì‚°
zScore = (wid - averageWid) / standardDeviation

// ì •ê·œë¶„í¬ CDF (Error function ê·¼ì‚¬)
percentile = normalCDF(zScore) * 100

// ë°˜ì „: WIDê°€ ë†’ì„ìˆ˜ë¡ (í•˜ì–€ìƒ‰) ë‚®ì€ ë°±ë¶„ìœ„
invertedPercentile = 100 - percentile
```

**ì˜ë¯¸**:
- ë°±ë¶„ìœ„ 0% (ìƒìœ„ 0%) = ê°€ì¥ ë°ì€ ì¹˜ì•„
- ë°±ë¶„ìœ„ 50% (ì¤‘ê°„) = í‰ê· 
- ë°±ë¶„ìœ„ 100% (ìƒìœ„ 100%) = ê°€ì¥ ëˆ„ëŸ° ì¹˜ì•„

### 4.4 ì¹˜ì•„ ë‚˜ì´ ì¶”ì •

```typescript
// ë°±ë¶„ìœ„ ê¸°ë°˜ ë‚˜ì´ ì¡°ì •
percentileOffset = (percentile - 50) / 50  // -1 ~ +1

// ì—°ë ¹ëŒ€ë³„ ì¡°ì • ë²”ìœ„
if (userAge <= 20) {
  maxYoungerBias = 8
  maxOlderBias = 12
} else if (userAge <= 40) {
  maxYoungerBias = 12
  maxOlderBias = 15
} else if (userAge <= 60) {
  maxYoungerBias = 15
  maxOlderBias = 18
} else {
  maxYoungerBias = 18
  maxOlderBias = 20
}

// ë‚˜ì´ ì¡°ì •
ageAdjustment = percentileOffset < 0
  ? percentileOffset * maxYoungerBias
  : percentileOffset * maxOlderBias

estimatedAge = userAge + ageAdjustment

// ë²”ìœ„ ì œí•œ (5ì„¸ ~ 95ì„¸)
estimatedAge = clamp(estimatedAge, max(5, userAge - maxYoungerBias), min(95, userAge + maxOlderBias))
```

### 4.5 WID í†µê³„ ì˜¤ì°¨ì „íŒŒ (Error Propagation)

ì—°êµ¬ ë°ì´í„°(`data.csv`)ëŠ” Lab ê°’(L*, a*, b*)ì˜ í‰ê· ê³¼ í‘œì¤€í¸ì°¨ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
WIDëŠ” Labì˜ ì„ í˜•ê²°í•©ì´ë¯€ë¡œ, ì˜¤ì°¨ì „íŒŒë¡œ WID í‰ê· ê³¼ í‘œì¤€í¸ì°¨ë¥¼ ë„ì¶œí•©ë‹ˆë‹¤:

```
WID_mean = 0.511 Ã— L_mean + (-2.324) Ã— a_mean + (-1.100) Ã— b_mean

WID_sd = sqrt( (0.511 Ã— L_sd)Â² + (-2.324 Ã— a_sd)Â² + (-1.100 Ã— b_sd)Â² )
```

**ê°€ì •**: L*, a*, b*ëŠ” í†µê³„ì ìœ¼ë¡œ ë…ë¦½ (ì¹˜ì•„ ìƒ‰ì¸¡ì •ì—ì„œ í‘œì¤€ì  ê·¼ì‚¬)

### 4.6 ì—°êµ¬ ë°ì´í„°
**íŒŒì¼**: `data.csv`

- **êµ¬ì¡°**: ë…¼ë¬¸ì¶œì²˜, ì„±ë³„, ì—°ë ¹ëŒ€, L* í‰ê· /í‘œì¤€í¸ì°¨, a* í‰ê· /í‘œì¤€í¸ì°¨, b* í‰ê· /í‘œì¤€í¸ì°¨
- **ì£¼ìš” ë°ì´í„°ì›**:
  - Kim (2018): ì„±ë³„/ì—°ë ¹ëŒ€ë³„ (Primary source, ì‹ ë¢°ë„ ë†’ìŒ)
  - Oh et al. (2022): 7-14ì„¸ ì†Œì•„ (Mixed gender)
  - Han et al. (2023): 50-89ì„¸ ê³ ë ¹ (ì£¼ì˜: 60-79ì„¸ í–‰ a_SD ì´ìƒì¹˜ ì¡´ì¬)

---

## 5. Lightning.ai API ê³„ì•½ (API Contract)

### 5.1 `GET /health`
ì„œë²„ ìƒíƒœ í™•ì¸ ë° Cold Start ëŒ€ë¹„ pre-warmìš©.

```json
// Response 200
{
  "status": "ok",
  "model_loaded": true,
  "uptime_seconds": 142
}
```

### 5.2 `POST /analyze`
ì´ë¯¸ì§€ ë¶„ì„ ì‘ì—… ì œì¶œ. **ì¦‰ì‹œ job_id ë°˜í™˜** (< 200ms).

```
Content-Type: multipart/form-data

Fields:
  image: File (JPEG/PNG/WebP, max 5MB)
  gender: string ("male" | "female")
  age: integer (1-100)
  mouth_info: string (JSON, optional) â€” MediaPipe ëœë“œë§ˆí¬

Response 200:
  { "job_id": "550e8400-e29b-41d4-a716-446655440000" }

Response 400:
  { "error": "invalid_image", "message": "ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í˜•ì‹ì…ë‹ˆë‹¤." }

Response 413:
  { "error": "image_too_large", "message": "ì´ë¯¸ì§€ê°€ 5MBë¥¼ ì´ˆê³¼í•©ë‹ˆë‹¤." }
```

### 5.3 `GET /status/{job_id}`
ì‘ì—… ìƒíƒœ í´ë§. í´ë¼ì´ì–¸íŠ¸ê°€ 2ì´ˆë§ˆë‹¤ í˜¸ì¶œ.

```json
// Processing
{
  "status": "processing",
  "progress": "inference"  // "preprocessing" | "inference" | "postprocessing" | "statistics"
}

// Completed
{
  "status": "completed",
  "result": { /* AnalysisResult (Section 3.4 ì°¸ì¡°) */ }
}

// Failed
{
  "status": "failed",
  "error": "no_teeth_detected",
  "message": "ì¹˜ì•„ë¥¼ ê²€ì¶œí•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì¹˜ì•„ê°€ ì˜ ë³´ì´ë„ë¡ ë‹¤ì‹œ ì´¬ì˜í•´ì£¼ì„¸ìš”."
}
```

### 5.4 ì—ëŸ¬ ì²˜ë¦¬ ë§¤íŠ¸ë¦­ìŠ¤

| ì‹œë‚˜ë¦¬ì˜¤ | ê°ì§€ | ì‚¬ìš©ì ë©”ì‹œì§€ | ë³µêµ¬ |
|---------|------|-------------|------|
| Cold Start | ì œì¶œ íƒ€ì„ì•„ì›ƒ (15ì´ˆ) | "AI ì„œë²„ ì‹œì‘ ì¤‘..." + í”„ë¡œê·¸ë ˆìŠ¤ | /health ì²´í¬ í›„ ìë™ ì¬ì‹œë„ |
| ì„œë²„ ë‹¤ìš´ | /health 3íšŒ ì‹¤íŒ¨ | "ì„œë¹„ìŠ¤ ì¼ì‹œ ì¤‘ë‹¨" | ìˆ˜ë™ ì¬ì‹œë„ ë²„íŠ¼ |
| ì˜ëª»ëœ ì´ë¯¸ì§€ | 400 ì‘ë‹µ | "JPEG, PNG, WebPë§Œ ì§€ì›" | ì¬ì—…ë¡œë“œ |
| ì´ë¯¸ì§€ ì´ˆê³¼ | 413 ì‘ë‹µ | "5MB ì´í•˜ ì´ë¯¸ì§€ ì‚¬ìš©" | ì••ì¶• í›„ ì¬ì—…ë¡œë“œ |
| ì¹˜ì•„ ë¯¸ê²€ì¶œ | Job failed | "ì¹˜ì•„ê°€ ë³´ì´ë„ë¡ ë‹¤ì‹œ ì´¬ì˜" | ì¬ì´¬ì˜ |
| íë¦° ì´ë¯¸ì§€ | í’ˆì§ˆ ê²½ê³  | "ì´ë¯¸ì§€ê°€ íë¦´ ìˆ˜ ìˆìŒ" ë°°ë„ˆ | ê²°ê³¼ í‘œì‹œ + ì¬ì´¬ì˜ ì œì•ˆ |
| ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ | fetch ì‹¤íŒ¨ | "ì—°ê²° ì˜¤ë¥˜" | ì¬ì‹œë„ ë²„íŠ¼ |
| Job ë§Œë£Œ | 404 ì‘ë‹µ | "ì„¸ì…˜ ë§Œë£Œ" | ì²˜ìŒë¶€í„° |
| MediaPipe ì‹¤íŒ¨ | í´ë¼ì´ì–¸íŠ¸ catch | mouthInfo ì—†ì´ ê³„ì† | ì •ìƒ ì €í•˜ (graceful) |

---

## 6. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 6.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Browser Client                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Hero      â”‚â†’ â”‚ Info Formâ”‚â†’ â”‚ Camera +    â”‚â†’ â”‚ Loading        â”‚ â”‚
â”‚  â”‚ (prewarm) â”‚  â”‚ (gender, â”‚  â”‚ MediaPipe   â”‚  â”‚ (polling)      â”‚ â”‚
â”‚  â”‚           â”‚  â”‚  age)    â”‚  â”‚ (mouthInfo) â”‚  â”‚ (cold start)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                      â”‚                  â”‚          â”‚
â”‚                                      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                      â”‚     â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚                       â”‚
â”‚  â”‚ Result Dashboard               â”‚ â”‚     â”‚                       â”‚
â”‚  â”‚ (WID gauge, tooth age, viz)    â”‚â†â”˜     â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â”‚ HTTPS (Direct)
                                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Lightning.ai (FastAPI + PyTorch GPU)               â”‚
â”‚                                                                     â”‚
â”‚  Endpoints:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ GET /health  â”‚  â”‚ POST /analyze    â”‚  â”‚ GET /status/{job_id}  â”‚ â”‚
â”‚  â”‚ (pre-warm)   â”‚  â”‚ (submit + job_id)â”‚  â”‚ (poll result)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                      â”‚
â”‚  Background Pipeline:        â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Validateâ”‚â†’ â”‚CLAHEâ”‚â†’ â”‚FPN+TTA   â”‚â†’ â”‚Mask â”‚â†’ â”‚RGB   â”‚â†’ â”‚Labâ†’  â”‚ â”‚
â”‚  â”‚+EXIF   â”‚  â”‚     â”‚  â”‚Inference â”‚  â”‚Refineâ”‚  â”‚Extractâ”‚  â”‚WID   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
â”‚  â”‚ Visualizationâ”‚â† â”‚ Tooth Age    â”‚â† â”‚ Stats+Percentileâ”‚â†â”€â”€â”˜      â”‚
â”‚  â”‚ (Green Overlay)â”‚ â”‚ Estimation  â”‚  â”‚ (Error Propag.) â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Vercel (Static Hosting Only)                       â”‚
â”‚                                                                     â”‚
â”‚  - Next.js SSR/SSG í˜ì´ì§€ ì„œë¹™                                      â”‚
â”‚  - API Routes ì—†ìŒ                                                   â”‚
â”‚  - í™˜ê²½ ë³€ìˆ˜: NEXT_PUBLIC_AI_SERVER_URL                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 AI ëª¨ë¸ (Lightning.ai)

**ëª¨ë¸ ì‚¬ì–‘**:
- **ì•„í‚¤í…ì²˜**: segmentation-models-pytorch FPN (EfficientNet-B7 backbone)
- **í´ë˜ìŠ¤**: 33ê°œ (0=ë°°ê²½, 1-32=ì¹˜ì•„ ë²ˆí˜¸ FDI 11-48)
- **ì…ë ¥**: 448Ã—448 RGB ì´ë¯¸ì§€ (ImageNet ì •ê·œí™”)
- **ì¶œë ¥**: 448Ã—448 ì„¸ê·¸ë©˜í…Œì´ì…˜ ë§ˆìŠ¤í¬
- **ì „ì²˜ë¦¬**: CLAHE (ì¡°ëª… í¸ì°¨ ë³´ì •)
- **TTA**: Horizontal flip (ì¢Œìš° ëŒ€ì¹­) + ì¹˜ì•„ í´ë˜ìŠ¤ ë¦¬ë§¤í•‘

**AI ë§ˆìŠ¤í¬ í›„ì²˜ë¦¬ (3ë‹¨ê³„)**:
1. **Adaptive Thresholding**: ëª¨ë¸ ì‹ ë¢°ë„(Confidence)ë¥¼ ì´ë¯¸ì§€ ë°ê¸°ì— ë”°ë¼ ê°€ë³€ ì ìš©
2. **Soft-Erosion (3-5px)**: ë§ˆìŠ¤í¬ ê²½ê³„ë©´ ì‚­ì œë¡œ ì‡ëª¸/ì…ìˆ  í˜¼ì… ì°¨ë‹¨
3. **Class Priority**: #11, #21(ì¤‘ì ˆì¹˜) 1ìˆœìœ„ â†’ ì‹¤íŒ¨ ì‹œ #12, #22ë¡œ í™•ì¥

**TTA ì¹˜ì•„ í´ë˜ìŠ¤ ë¦¬ë§¤í•‘**:
- Horizontal flip ì‹œ ì¢Œìš° ì¹˜ì•„ ë²ˆí˜¸ êµí™˜
- Quadrant 1 (ìƒì•… ìš°ì¸¡) â†” Quadrant 2 (ìƒì•… ì¢Œì¸¡)
- Quadrant 3 (í•˜ì•… ì¢Œì¸¡) â†” Quadrant 4 (í•˜ì•… ìš°ì¸¡)

### 6.3 ë¹„ë™ê¸° Job ì²˜ë¦¬

```python
# Lightning.ai ì„œë²„ì˜ Job ê´€ë¦¬
- In-memory dict ì €ì¥ (ì˜êµ¬ ì €ì¥ ë¶ˆí•„ìš”)
- ThreadPoolExecutor(max_workers=2) + asyncio.run_in_executor
- Job TTL: 10ë¶„ (60ì´ˆë§ˆë‹¤ cleanup)
- Rate Limit: IPë‹¹ 10 requests/min
```

### 6.4 Cold Start ëŒ€ì‘ (3-Layer)

| Layer | ì „ëµ | ì‹œì  |
|-------|------|------|
| 1 | Pre-warm | Hero/InfoForm ë§ˆìš´íŠ¸ ì‹œ `/health` fire-and-forget |
| 2 | Submit timeout | 15ì´ˆ íƒ€ì„ì•„ì›ƒ â†’ "ì„œë²„ ì‹œì‘ ì¤‘" UI í‘œì‹œ |
| 3 | Auto-retry | `/health` 3ì´ˆë§ˆë‹¤ ì²´í¬ â†’ warm í›„ ìë™ ì¬ì œì¶œ |

**Cold Start ì‹œ ì‚¬ìš©ì ê²½í—˜**:
```
Step 1: ì‚¬ìš©ì ì ‘ì† â†’ Heroì—ì„œ /health pre-warm ì‹œì‘
Step 2: ì •ë³´ ì…ë ¥ (15-30ì´ˆ ì†Œìš”) â†’ ì´ ì‹œê°„ ë™ì•ˆ ì„œë²„ ê¸°ë™ ì™„ë£Œ
Step 3: ì‚¬ì§„ ì´¬ì˜ â†’ Lightning.ai ì´ë¯¸ warm ìƒíƒœ
â†’ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° Cold Startë¥¼ ì‚¬ìš©ìê°€ ì²´ê°í•˜ì§€ ëª»í•¨
```

---

## 7. CORS ë° ë³´ì•ˆ

### 7.1 CORS ì„¤ì • (Lightning.ai)
```python
allow_origins = [
    "https://your-app.vercel.app",
    "http://localhost:3000"
]
allow_methods = ["GET", "POST"]
allow_headers = ["*"]
```

### 7.2 ë³´ì•ˆ ê³ ë ¤ì‚¬í•­
- Lightning.ai URLì€ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì— í¬í•¨ (`NEXT_PUBLIC_AI_SERVER_URL`)
- ê³µê°œ APIì´ì§€ë§Œ rate limitingìœ¼ë¡œ ë‚¨ìš© ë°©ì§€ (10 req/min/IP)
- ì´ë¯¸ì§€ëŠ” ë©”ëª¨ë¦¬ì—ì„œë§Œ ì²˜ë¦¬, ì˜êµ¬ ì €ì¥í•˜ì§€ ì•ŠìŒ
- ì´ë¯¸ì§€ Magic byte ê²€ì¦ (í™•ì¥ìë§Œìœ¼ë¡œ íŒë‹¨í•˜ì§€ ì•ŠìŒ)
- Job ê²°ê³¼ 10ë¶„ í›„ ìë™ ì‚­ì œ

---

## 8. ì œì•½ì‚¬í•­ ë° ê³ ë ¤ì‚¬í•­

### 8.1 ë°°í¬ í™˜ê²½

**Vercel (í”„ë¡ íŠ¸ì—”ë“œ)**:
- âœ… ì •ì  í˜¸ìŠ¤íŒ…ë§Œ (API Routes ì—†ìŒ)
- âœ… í™˜ê²½ ë³€ìˆ˜: `NEXT_PUBLIC_AI_SERVER_URL`
- âœ… 10ì´ˆ íƒ€ì„ì•„ì›ƒ ë¬´ê´€ (ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ ì‚¬ìš© ì•ˆ í•¨)

**Lightning.ai (AI ì„œë²„)**:
- âš ï¸ ë¬´ë£Œ í”Œëœ: ì›” GPU ì‹œê°„ ì œí•œ, 30ë¶„ ìë™ ìŠ¬ë¦½
- âš ï¸ ì‹œì—° ì „ Studio í™œì„±í™” í•„ìš”
- âœ… Cold StartëŠ” Pre-warm 3-Layer ì „ëµìœ¼ë¡œ ëŒ€ì‘

### 8.2 ë°ì´í„° ì œì•½
- âŒ ì—°êµ¬ ë°ì´í„°(`data.csv`) ìˆ˜ì • ê¸ˆì§€
- âŒ WID ê³„ì‚° ê³µì‹ ë³€ê²½ ê¸ˆì§€
- âŒ í†µê³„ ì•Œê³ ë¦¬ì¦˜ ë³€ê²½ ê¸ˆì§€
- âš ï¸ Han et al. (2023) 60-79ì„¸ a_SD ì´ìƒì¹˜ â†’ ë§¤ì¹­ ì‹œ ì œì™¸ ë˜ëŠ” low-confidence í”Œë˜ê·¸

### 8.3 ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
- âœ… iOS Safari: ë¹ˆ MIME íƒ€ì… ì²˜ë¦¬, HEIC ê±°ë¶€
- âœ… MediaPipe: ë™ì  ë¡œë”©, íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ (ì‹¤íŒ¨ ì‹œ mouthInfo ì—†ì´ ê³„ì†)
- âœ… ì´ë¯¸ì§€ ì••ì¶•: browser-image-compression (ìµœëŒ€ 1MB)

### 8.4 ì„±ëŠ¥ ëª©í‘œ
- POST /analyze ì‘ë‹µ: < 200ms (job_id ë°˜í™˜ë§Œ)
- GET /status ì‘ë‹µ: < 100ms
- ì „ì²´ ë¶„ì„ ì†Œìš”: 3-5ì´ˆ (warm ìƒíƒœ)
- Cold Start í¬í•¨: 25-35ì´ˆ (ìµœì´ˆ 1íšŒë§Œ)

---

## 9. íŒŒì¼ êµ¬ì¡°

### 9.1 Next.js Frontend (Vercel)
```
TToneAiV2/
  app/
    layout.tsx                 # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ, í°íŠ¸, ë©”íƒ€ë°ì´í„°
    page.tsx                   # 5-step í”Œë¡œìš° ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°
    globals.css                # Tailwind v4 + Cloud Dancer í…Œë§ˆ

  components/
    hero-section.tsx           # Step 1 + pre-warm trigger
    info-form.tsx              # Step 2 (ì„±ë³„, ë‚˜ì´)
    camera-upload.tsx          # Step 3 (MediaPipe + ì••ì¶•)
    analysis-loading.tsx       # Step 4 (í´ë§ + cold start)
    result-dashboard.tsx       # Step 5 (WID ê²Œì´ì§€, ì¹˜ì•„ ë‚˜ì´, ì‹œê°í™”)
    ui/                        # Shadcn UI í”„ë¦¬ë¯¸í‹°ë¸Œ

  lib/
    types.ts                   # TypeScript íƒ€ì… ì •ì˜
    ai-client.ts               # Lightning.ai API í´ë¼ì´ì–¸íŠ¸ (submit, poll, health)
    use-analysis.ts            # React hook (ë¶„ì„ í”Œë¡œìš° ìƒíƒœ ê´€ë¦¬)
    constants.ts               # AI_SERVER_URL, polling intervals, timeouts

  public/
    images/
      photo-guide.webp         # ì´¬ì˜ ê°€ì´ë“œ ì´ë¯¸ì§€

  data.csv                     # ì—°êµ¬ ë°ì´í„° (ì°¸ì¡°ìš© ë³´ì¡´, ëŸ°íƒ€ì„ ë¯¸ì‚¬ìš©)
```

### 9.2 Lightning.ai Server (Python)
```
lightning-server/
  app/
    main.py                    # FastAPI, CORS, ë¼ìš°íŠ¸, Job store, Cleanup
    inference.py               # ëª¨ë¸ ë¡œë”©, CLAHE, FPN ì¶”ë¡ , TTA
    postprocess.py             # ë§ˆìŠ¤í¬ ì •ì œ, Morphology, Connected Components
    rgb_extraction.py          # ì¹˜ì•„ RGB ì¶”ì¶œ (ì¤‘ì ˆì¹˜ ìš°ì„ , Erosion)
    visualization.py           # ì´ˆë¡ìƒ‰ ì˜¤ë²„ë ˆì´ â†’ Base64 PNG
    color_science.py           # sRGB â†’ Lab â†’ WID (Section 4 ì•Œê³ ë¦¬ì¦˜ Python êµ¬í˜„)
    statistics.py              # ì—°êµ¬ ë°ì´í„° ë§¤ì¹­, ë°±ë¶„ìœ„, ì¹˜ì•„ ë‚˜ì´ (Section 4 ì•Œê³ ë¦¬ì¦˜)
    schemas.py                 # Pydantic ìš”ì²­/ì‘ë‹µ ëª¨ë¸

  model/
    tooth_number_saved_weight.pt  # FPN ëª¨ë¸ ê°€ì¤‘ì¹˜ (264MB)

  tests/
    test_color_science.py      # ìƒ‰ê³µê°„ ë³€í™˜ êµì°¨ ê²€ì¦
    test_statistics.py         # í†µê³„/ì¹˜ì•„ë‚˜ì´ êµì°¨ ê²€ì¦

  requirements.txt
  README.md
```

---

## 10. ë””ìì¸ í…Œë§ˆ

### 10.1 2026 Pantone Cloud Dancer
- **Primary**: Cloud Dancer (#F0EBE3) â€” ë”°ëœ»í•œ ì˜¤í”„í™”ì´íŠ¸
- **Accent**: Soft gold gradients for WID gauge
- **Text**: Dark charcoal (#2D2D2D) on light backgrounds
- **Success**: Mint green (#86EFAC) for tooth detection overlay
- **Gauge**: Yellow (#FBBF24) â†’ White (#FFFFFF) gradient (semicircle)
- **Overall**: ë¯¸ë‹ˆë©€, í´ë¦°, ì˜ë£Œ/ë·°í‹° ëŠë‚Œì˜ ëª¨ë˜ ë””ìì¸

---

## 11. ìš”ì•½

### ë³´ì¡´ ëŒ€ìƒ (ë³€ê²½ ê¸ˆì§€)
âœ… WID ê³„ì‚° ê³µì‹ ë° ì•Œê³ ë¦¬ì¦˜
âœ… RGB â†’ CIELab ë³€í™˜
âœ… ë°±ë¶„ìœ„ ê³„ì‚°
âœ… ì¹˜ì•„ ë‚˜ì´ ì¶”ì •
âœ… ì—°êµ¬ ë°ì´í„° (`data.csv`)
âœ… ì „ì²´ ì‚¬ìš©ì í”Œë¡œìš° (5ë‹¨ê³„)

### ìƒˆ ì•„í‚¤í…ì²˜ í•µì‹¬
ğŸ†• Lightning.aiê°€ ëª¨ë“  ì—°ì‚° ë‹´ë‹¹ (ì´ë¯¸ì§€ ì²˜ë¦¬ â†’ WID â†’ í†µê³„ â†’ ì‹œê°í™”)
ğŸ†• Vercelì€ í”„ë¡ íŠ¸ì—”ë“œë§Œ ì„œë¹™ (API Routes ì—†ìŒ)
ğŸ†• í´ë¼ì´ì–¸íŠ¸ â†’ Lightning.ai ì§ì ‘ í†µì‹  (ë¹„ë™ê¸° í´ë§)
ğŸ†• Cold Start 3-Layer ëŒ€ì‘ (Pre-warm â†’ Timeout UI â†’ Auto-retry)
ğŸ†• AI-Only (Heuristic í´ë°± ì œê±°)

### í•µì‹¬ ëª©í‘œ
- ğŸ¯ Vercel 10ì´ˆ íƒ€ì„ì•„ì›ƒ ì œí•œ ì™„ì „ ìš°íšŒ
- ğŸ¯ ë‹¨ìˆœí•˜ê³  ì•ˆì •ì ì¸ 2-ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ (Frontend + AI Server)
- ğŸ¯ 90%+ ì¹˜ì•„ ê²€ì¶œ ì„±ê³µë¥  (AI ëª¨ë¸)
- ğŸ¯ í•œ ë²ˆì— ì˜ ì‘ë™í•˜ëŠ” í”„ë¡œê·¸ë¨
